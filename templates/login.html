<!doctype html>

<head>
    <meta charset="utf-8">
    <title>登录</title>
    <link rel="stylesheet" type="text/css" href="../static/style_for_login.css">
    <script src="../static/md5.js"></script>
</head>

<body>
    <div class="main">
        <p class="head">登录</p>
        <form method="POST" action='/userlogin'>
            {% for message in get_flashed_messages(with_categories=True) %}
            <div class="flash">
                {{ message[1] }}
            </div>
            {% endfor %}
            <label class="username">
                <input type="text" name="username" autocomplete="off" maxlength="20" placeholder="你的昵称" value={{username}}>
            </label>

            <br>
            <label class="password">
                <input type="password" name="password" value="" autocomplete="off" maxlength="20" placeholder="密码">
            </label>
            <br>


            <a href="/forgetpw">忘记密码？</a>

            <div class="buttons">
                <input type="submit" value="登录" class="button">
                <input type="button" value="注册" class="button">
            </div>

        </form>

    </div>

    <script>
        //handle the input
        var button = document.querySelector("input[type='submit']")
        button.onclick = function (event) {
            event.preventDefault()
            if (document.querySelector("input[name='username']").value === "") {
                alert("用户名不能为空")
                return
            }
            if (document.querySelector("input[name='password']").value === "") {
                alert("密码不能为空")
                return
            }
            document.querySelector("form").submit();
        }

        //register mode
        let register = document.querySelector("input[type='button']")
        register.addEventListener("click", function () {
            window.location.href = '/register'
        })

    </script>
</body>